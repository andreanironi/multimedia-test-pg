$(document).ready(function(){var t,e=["en","it","de","fr"],a=!1,r=!1,n=!1,i=1,l=3,o=4,s=5,c=3,d=6,p=-1,u=-1,f=null,y=null,x=null,m=null,h=null,g=null,v=null,b=null,w=null,k=!1,A=-1,z="http://ecdc.europa.eu/",L="https://www.efsa.europa.eu",S=45,E=23,M=45,R=36,C=335,T=220,P=200,O=30,N=950,I=940,F=220,U=120,B=320,G=400,j=10,W=E,q=15,X=60,D="#333",V="#95b863",H="#008192",Q="#e8ebed",Y=Q,J=2*Math.PI,K=.47,Z=22,tt=null,et=null,at=null,rt=null,nt=0,it=0,lt=0,ot=0,st="All antimicrobials",ct="All countries",dt="DATA NOT REPORTED",pt="European Union",ut="Ampicillin",ft=["E","S","W","N"],yt=["EASTERN EUROPE","SOUTHERN EUROPE","WESTERN EUROPE","NORTHERN EUROPE"],xt={E:0,S:0,W:0,N:0},mt=0,ht=0,gt=navigator.userAgent.indexOf("hrome")>1,vt=!1;if(gt){var bt=navigator.userAgent.indexOf("hrome")+6,_t=navigator.userAgent.indexOf(".",bt);Number(navigator.userAgent.substring(bt,_t))<53&&(vt=!0)}var wt,kt,At,zt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Lt=navigator.userAgent.indexOf("Trident")>0,St=$(window).outerWidth()<700,Et=null,Mt=[],Rt=-1,Ct=1,Tt=1,Pt=0,Ot=Tt,$t=null,Nt=null,It=null,Ft=null,Ut=function(t){return t<.1?"#84746C":t<1?"#ef9800":t<10?"#ffce3a":t<20?"#246898":t<50?"#86468a":t<70?"#ea5d8f":"#595a59"},Bt=function(t){return"#ffffff"};function Gt(t,e){var a=Ot===Tt?"/sites/default/files/interactive_tools/dataviz_2017/data/data-countries.json":"/sites/default/files/interactive_tools/dataviz_2017/data/data-bacteria.json";$.ajax({url:a,method:"GET",dataType:"json",success:function(a){var r;et=a.antimicrobials,tt=a.countries,at=a.bacteria,rt=a.species,Et=a.data,t&&function(){var t,e=(f=d3.select("#bacteria-div")).append("defs");Fe()||((t=e.append("filter").attr("id","filterGlass")).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",12).attr("color-interpolation-filters","sRGB").attr("result","blur"),t.append("feColorMatrix").attr("in","blur").attr("mode","matrix").attr("values","1 0 0 0 0  0 1 0 0.05 0  0 0 1 0.1 0  0 0 0 18 -7").attr("result","gooey"),(t=e.append("filter").attr("id","filterS2")).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",8).attr("color-interpolation-filters","sRGB").attr("result","blur").attr("id","blurf"),t.append("feColorMatrix").attr("in","blur").attr("mode","matrix").attr("values",Kt(20)).attr("result","gooey"));e.append("clipPath").attr("id","clipper").append("circle").attr("cx",N/2).attr("cy",I/2).attr("r",F-j),e.append("clipPath").attr("id","clipper2").append("circle").attr("cx",N/2).attr("cy",I/2).attr("r",U+5),e.append("clipPath").attr("id","clipper3").append("circle").attr("cx",N/2).attr("cy",I/2).attr("r",165),e.append("clipPath").attr("id","clipper4").append("rect").attr("x",175).attr("y",330).attr("width",600).attr("height",437)}(),mt=0,ht=Et.length,t&&(nt=_.size(et)-1),pe(!1),t&&(r=Mt,function(){f.append("circle").attr("id","nations-line").attr("r",0).attr("fill",Y).attr("cx",N/2).attr("cy",I/2),f.append("circle").attr("id","central-border").attr("fill","#00b18b").attr("cx",N/2).attr("cy",I/2).attr("r",0),f.append("circle").attr("class","comparison-circle-guide").attr("fill","transparent").attr("stroke","#f0f0f0").attr("stroke-width",26).attr("cx",N/2).attr("cy",I/2).attr("r",C-11).attr("opacity",0),f.append("circle").attr("class","comparison-circle-guide").attr("fill","transparent").attr("stroke","#e6e6e6").attr("stroke-width",10).attr("cx",N/2).attr("cy",I/2).attr("r",C-11).attr("opacity",0),f.append("circle").attr("class","comparison-circle-guide").attr("fill","transparent").attr("stroke","#f0f0f0").attr("stroke-width",26).attr("cx",N/2).attr("cy",I/2).attr("r",T).attr("opacity",0),f.append("circle").attr("class","comparison-circle-guide").attr("fill","transparent").attr("stroke","#e6e6e6").attr("stroke-width",10).attr("cx",N/2).attr("cy",I/2).attr("r",T).attr("opacity",0),f.append("path").attr("id","comparison-circle-guide-text-1").attr("class","comparison-circle-guide").attr("d","M"+(N/2-85)+" "+(I/2-C+20)+" C "+(N/2-30)+" "+(I/2-C+5)+", "+(N/2+30)+" "+(I/2-C+5)+", "+(N/2+85)+" "+(I/2-C+20)).attr("fill","transparent"),f.append("text").attr("class","comparison-circle-guide").attr("text-anchor","middle").attr("fill",H).attr("font-size","15px").attr("font-weight","bold").attr("opacity",0).append("textPath").attr("id","comparison-circle-guide-text-1-text").attr("startOffset","50%").attr("xlink:href","#comparison-circle-guide-text-1"),f.append("path").attr("id","comparison-circle-guide-text-2").attr("class","comparison-circle-guide").attr("d","M"+(N/2-90)+" "+(I/2-T+15)+" C "+(N/2-60)+" "+(I/2-T-5)+", "+(N/2+60)+" "+(I/2-T-5)+", "+(N/2+90)+" "+(I/2-T+15)).attr("fill","transparent"),f.append("text").attr("class","comparison-circle-guide").attr("text-anchor","middle").attr("fill",H).attr("font-size","15px").attr("font-weight","bold").attr("opacity",0).append("textPath").attr("id","comparison-circle-guide-text-2-text").attr("startOffset","50%").attr("xlink:href","#comparison-circle-guide-text-2");for(var t=0;t<15;t++)f.append("line").attr("class","comparison-circle-guide comparison-circle-guide-line").attr("stroke",V).attr("stroke-dasharray","5,8").attr("stroke-width",2)}(),function(t,e,a){var r=[{x:0,y:0,color:"transparent"}],n=[];_.each(r,function(e,a){for(var r=2;r--;)_.each(t,function(t,r){n.push({ox:e.x,oy:e.y,x:e.x+40*Math.random(),y:e.y+40*Math.random(),color:e.color,p:a,value:t.value,name:t.name,code:t.code})})}),_.each(n,function(t,r){t.ox+=e/2,t.oy+=a/2,t.x+=e/2,t.y+=a/2}),r=n,f.append("g").attr("id","internal-area").append("circle").attr("class","glass-int").attr("cx",e/2).attr("cy",a/2).attr("r",F).attr("fill",H).attr("stroke","#00b18b").attr("stroke-width",j);var i=d3.select("#internal-area").html();g=f.append("g"),v=g.append("g").html(i).style("display","none");var l=d3.arc().innerRadius(U).outerRadius(U-20).startAngle(-.7).endAngle(.7);f.append("path").attr("id","switch-button-text-arc").attr("class","switch-button glass-int").attr("d",l).attr("fill","#00b18b").attr("transform","translate("+e/2+", "+(a/2-1)+")").attr("opacity",1).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("fill","#f5f7f7"),d3.select("#switch-button-text").attr("fill","#00b18b")}).on("mouseout",function(){d3.select(this).attr("fill","#00b18b"),d3.select("#switch-button-text").attr("fill","#f5f7f7")}).on("click",function(){At=Ot===Tt?pt:ut,Jt()}),f.append("text").attr("id","switch-button-text-container").attr("class","switch-button").attr("text-anchor","middle").attr("dy",15).attr("fill","#fff").attr("font-size",Ft.other_labels.switch_button[Xt]).attr("letter-spacing","1.5px").attr("font-weight","bold").attr("pointer-events","none").append("textPath").attr("id","switch-button-text").attr("startOffset","24.5%").attr("xlink:href","#switch-button-text-arc"),d3.selectAll(".switch-button").style("display","none"),l=d3.arc().innerRadius((T+C)/2).outerRadius((T+C)/2).startAngle(-.8).endAngle(.8),f.append("path").attr("id","data-not-available-message-arc").attr("class","data-not-available-message").attr("d",l).attr("fill","transparent").attr("transform","translate("+e/2+", "+(a/2-1)+")"),f.append("text").attr("id","data-not-available-message-container").attr("class","data-not-available-message").attr("text-anchor","middle").attr("dy",15).attr("fill",H).attr("font-size","28px").attr("letter-spacing","1.5px").attr("font-weight","bold").attr("pointer-events","none").append("textPath").attr("id","data-not-available-message-text").attr("startOffset","25%").attr("xlink:href","#data-not-available-message-arc").text(dt),d3.selectAll(".data-not-available-message").style("display","none"),Fe()||g.style("filter","url(#filterS2)"),g.selectAll(".gooey").data(r).enter().append("circle").attr("class","gooey").attr("id",function(t,e){return"gooey-"+e}).attr("clip-path","url(#clipper)").style("cursor","pointer").attr("data-code",function(t,e){return t.code}).attr("cx",function(t,e){return r[e].x}).attr("cy",function(t,e){return r[e].y}).attr("r",function(t,e){return 0}).attr("fill",function(t,e){return t.color});var o=f.append("g").attr("id","menu-central").attr("opacity",0),s=null;if(Lt){var l=Pe(e/2,a/2+U,20,-90,90);(s=o.append("path")).attr("d",l).attr("fill","#00b18b").attr("cursor","pointer")}else(s=o.append("circle")).attr("cx",e/2).attr("cy",a/2+U).attr("r",20).attr("fill","#00b18b").attr("cursor","pointer").attr("clip-path","url(#clipper2)");s.on("click",function(t){d3.event.stopPropagation(),ze(3)}).on("mouseover",function(){d3.select(this).attr("fill","#fff"),o.selectAll("line").attr("stroke",H)}).on("mouseout",function(){d3.select(this).attr("fill","#00b18b"),o.selectAll("line").attr("stroke","#fff")}),o.append("line").attr("x1",e/2-7).attr("y1",a/2+U-11).attr("x2",e/2+7).attr("y2",a/2+U-11).attr("stroke","#fff").attr("stroke-width",3).attr("pointer-events","none"),o.append("line").attr("x1",e/2-7).attr("y1",a/2+U-6).attr("x2",e/2+7).attr("y2",a/2+U-6).attr("stroke","#fff").attr("stroke-width",3).attr("pointer-events","none"),o.append("line").attr("x1",e/2-7).attr("y1",a/2+U-1).attr("x2",e/2+7).attr("y2",a/2+U-1).attr("stroke","#fff").attr("stroke-width",3).attr("pointer-events","none"),f.append("text").attr("class","intro-text intro-title").attr("x",e/2).attr("y",a/2-110).text(It.home.title_line_1).attr("font-weight","400").attr("font-size",Ft.home.title[Xt]).attr("text-anchor","middle").attr("fill","#fff").attr("opacity","1").attr("pointer-events","none"),f.append("text").attr("class","intro-text intro-title").attr("x",e/2).attr("y",a/2-80).text(It.home.title_line_2).attr("font-weight","400").attr("font-size",Ft.home.title[Xt]).attr("text-anchor","middle").attr("fill","#fff").attr("opacity","1").attr("pointer-events","none");var c=[];c=Lt||zt?[It.home.text_part_1+It.home.text_part_2+It.home.text_part_3+It.home.text_part_4,It.home.text_part_5,It.home.text_part_6," ",It.home.text_part_7,It.home.text_part_8,It.home.text_part_9,It.home.text_part_10]:[It.home.text_part_1+"<tspan style='font-style:italic'>"+It.home.text_part_2+"</tspan> "+It.home.text_part_3+"<tspan style='font-style:italic'>"+It.home.text_part_4+"</tspan>",It.home.text_part_5,It.home.text_part_6," ",It.home.text_part_7,It.home.text_part_8,It.home.text_part_9,It.home.text_part_10],_.each(c,function(t,r){Lt||zt?(t=(t=t.replace("<tspan style='font-style:italic'>","")).replace("</tspan>",""),f.append("text").text(t).attr("dy",r+"em").attr("class","intro-text intro-text-content").attr("id","intro-text-"+r).attr("x",e/2).attr("y",a/2-40).attr("font-size",Ft.home.text[Xt]).attr("text-anchor","middle").attr("fill","#fff").attr("opacity","1").attr("pointer-events","none")):f.append("text").html(t).attr("dy",r+"em").attr("class","intro-text intro-text-content").attr("id","intro-text-"+r).attr("x",e/2).attr("y",a/2-40).attr("font-size",Ft.home.text[Xt]).attr("text-anchor","middle").attr("fill","#fff").attr("opacity","1").attr("pointer-events","none")}),f.append("rect").attr("id","starter").attr("x",e/2-90).attr("width",180).attr("y",a/2+101).attr("height",53).attr("fill","#e6e6e6").attr("rx",8).attr("ry",8).attr("cursor","pointer").on("mouseover",function(t){$(this).attr("fill","#f0f0f0")}).on("mouseout",function(t){$(this).attr("fill","#e0e0e0")}),f.append("text").attr("id","starter-text").attr("x",e/2).attr("y",a/2+135).attr("text-anchor","middle").attr("fill",H).text(It.home.start_button).attr("font-size","22px").attr("font-weight","700").attr("pointer-events","none");var l=d3.arc().innerRadius(F+140).outerRadius(F+150).startAngle(1).endAngle(5.28);f.append("path").attr("class","intro-element").attr("d",l).attr("fill","#e6e6e6").attr("transform","translate("+e/2+", "+(a/2-10)+")").attr("opacity",1),f.append("image").attr("class","intro-element").attr("xlink:href","https://www.efsa.europa.eu/sites/default/files/interactive_tools/dataviz_2017/img/ECDC_logo.png").attr("x",e/2+45).attr("y",a/2-F-180).attr("width","245px").attr("height","118px").attr("opacity",1).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("opacity",.8)}).on("mouseout",function(){d3.select(this).attr("opacity",1)}).on("click",function(){window.open(z,"_blank")}),f.append("image").attr("class","intro-element").attr("xlink:href","https://www.efsa.europa.eu/sites/default/files/interactive_tools/dataviz_2017/img/logo efsa.png").attr("x",e/2-260).attr("y",a/2-F-180).attr("width","250px").attr("height","118px").attr("opacity",1).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("opacity",.8)}).on("mouseout",function(){d3.select(this).attr("opacity",1)}).on("click",function(){window.open(L,"_blank")}),d3.select("#starter").on("click",function(){if(!k){window.activateBox&&window.activateBox(),d3.selectAll(".intro-text").attr("opacity",0),d3.selectAll(".intro-element").transition().duration(400).ease(d3.easeLinear).attr("opacity",0).on("end",function(){d3.select(this).remove()}),k=!0;var t=d3.select("#gooey-0");t.p=0,function(t,e){d3.selectAll(".column p").transition().duration(4e3).style("color","#e0e0e0");var a=t.p,r=0;gt?f.selectAll(".gooey").filter(function(t,e){return t.p!=a}).transition().duration(300).attr("r",0):(r=0,f.selectAll(".gooey").filter(function(t,e){return t.p!=a}).attr("r",0)),d3.select("#nations-line").transition().delay(2e3).duration(5e3).attr("r",B),f.selectAll(".gooey").filter(function(t,e){return t.p==a}).attr("class","gooey gooey-nationed").attr("stroke","#fff").attr("stroke-width",0).attr("clip-path","none"),f.selectAll(".gooey").filter(function(t,e){return t.p!=a}).attr("class","gooey gooey-unnationed").attr("stroke","#fff").attr("stroke-width",0).attr("clip-path","none"),A=a,fe(r),d3.select("#central-border").transition().duration(1e3).attr("r",U+5),d3.selectAll(".glass-int").transition().duration(1e3).attr("stroke-width",0),window.setTimeout(function(){!function(){if(!Fe())var t=20,e=setInterval(function(){d3.select("#filterS2 feColorMatrix").attr("values",Kt(t)),++t>100&&clearInterval(e)},10)}(),f.selectAll(".gooey").filter(function(t,e){return t.p!=a}).attr("r",0),function(){for(var t,e,a=ue(K,B),r=_.size(a),n=0,i=0;i<2*r;i++)t=a[n].x,e=a[n].y,f.append("circle").attr("class","gooey-border").attr("stroke","#fff").attr("stroke-width",1.5).attr("fill","transparent").attr("opacity",0).attr("cx",t).attr("cy",e).style("pointer-events","none"),++n===r&&(n=0);Ee(),d3.select("#glass-ext").transition().duration(2e3).ease(d3.easeLinear).attr("opacity",0).attr("stroke",0),d3.selectAll(".circular-selector").transition().delay(1800).duration(1800).ease(d3.easeLinear).attr("r",Z),d3.selectAll(".central-text").style("display","block").transition().delay(1800).duration(2e3).attr("opacity",1),d3.select("#glass-intra").transition().delay(1400).duration(1400).attr("r",G).attr("opacity",0),d3.selectAll("circle.glass-int").transition().delay(1400).duration(1400).ease(d3.easeLinear).attr("r",U),window.setTimeout(function(){d3.selectAll(".nation-text").attr("x",function(t,e){return a[e].x}).attr("y",function(t,e){var r=a[e].y+5;return d3.select(this).attr("oy",r),r}),d3.selectAll(".nation-text-perc").attr("opacity",0).attr("x",function(t,e){return a[e].x}).attr("y",function(t,e){return a[e].y+20}),d3.selectAll(".gooey-nationed").on("mouseover",function(t,e){if("EU"===t.code)return kt=e,void xe(ue(K,B),e);if(wt!==e){kt=e;var a=me(ue(K,B),kt);wt&&(a=me(a,wt)),xe(a,e)}}).on("mouseout",function(t,e){if(wt!==e){kt=null;var a=ue(K,B);wt&&(a=me(a,wt)),xe(a,e)}}).on("click",function(t,e){if(_e())return!1;ge(),we(),Oe(t,e,d3.select(this),e),window.setTimeout(ke,600)}),b.style("display","block"),w.style("display","block"),window.setTimeout(function(){!function(){if(!Fe())var t=100,e=setInterval(function(){d3.select("#filterS2 feColorMatrix").attr("values",Kt(t)),--t<7&&clearInterval(e)},30)}(),window.setTimeout(function(){d3.selectAll(".switch-button").style("display","block"),f.selectAll(".gooey-border").attr("opacity",1),d3.select("#menu-central").attr("opacity",1),d3.selectAll(".gooey-unnationed").remove(),b.attr("opacity",1),w.attr("opacity",1),ee(),Me(),v.style("display","block"),g.exit().remove(),d3.selectAll(".macronations-line").transition().duration(1e3).ease(d3.easeLinear).attr("opacity",1),d3.selectAll(".macronations-line-text").transition().duration(2e3).ease(d3.easeLinear).attr("opacity",1),d3.select("#blurf").transition().duration(300).ease(d3.easeLinear).attr("stdDeviation",3)},2e3)},1e3)},1e3)}()},1e3),window.setTimeout(function(){var t=ue(K,B);xe(t,-1)},6e3)}(t),d3.select("#starter").remove(),d3.select("#starter-text").remove()}})}(r,N,I),function(){var t=f.append("g");b=t.append("g").attr("id","central-text-lines-top").attr("opacity",0).style("display","none"),w=t.append("g").attr("id","central-text-lines-bottom").attr("opacity",0).style("display","none"),b.append("line").attr("x1",N/2-.9*U).attr("y1",I/2-20).attr("x2",N/2+.9*U).attr("y2",I/2-20).attr("stroke","#fff").attr("stroke-width",1.5),b.append("circle").attr("cx",N/2).attr("cy",I/2-20).attr("r",4).attr("fill","#fff"),b.append("line").attr("class","central-text-lines-top-arrow-component").attr("x1",N/2-2).attr("y1",I/2-43).attr("x2",N/2+8).attr("y2",I/2-33).attr("stroke","#fff").attr("stroke-width","6px").attr("pointer-events","none"),b.append("line").attr("class","central-text-lines-top-arrow-component").attr("x1",N/2+2).attr("y1",I/2-43).attr("x2",N/2-8).attr("y2",I/2-33).attr("stroke","#fff").attr("stroke-width","6px").attr("pointer-events","none"),b.append("rect").attr("x",N/2-20).attr("y",I/2-70).attr("width",40).attr("height",40).attr("fill","transparent").attr("cursor","pointer").on("mouseover",function(){d3.selectAll(".central-text-lines-top-arrow-component").attr("stroke","#ddd")}).on("mouseout",function(){d3.selectAll(".central-text-lines-top-arrow-component").attr("stroke","#fff")}).on("click",function(t,e){te(-1),Zt(!0,Rt)}),w.append("line").attr("x1",N/2-.9*U).attr("y1",I/2+25).attr("x2",N/2+.9*U).attr("y2",I/2+25).attr("stroke","#fff").attr("stroke-width",1.5),w.append("circle").attr("cx",N/2).attr("cy",I/2+25).attr("r",4).attr("fill","#fff"),w.append("line").attr("class","central-text-lines-bottom-arrow-component").attr("x1",N/2-2).attr("y1",I/2+48).attr("x2",N/2+8).attr("y2",I/2+38).attr("stroke","#fff").attr("stroke-width","6px").attr("pointer-events","none"),w.append("line").attr("class","central-text-lines-bottom-arrow-component").attr("x1",N/2+2).attr("y1",I/2+48).attr("x2",N/2-8).attr("y2",I/2+38).attr("stroke","#fff").attr("stroke-width","6px").attr("pointer-events","none"),w.append("rect").attr("x",N/2-20).attr("y",I/2+35).attr("width",40).attr("height",40).attr("fill","transparent").attr("cursor","pointer").on("mouseover",function(){d3.selectAll(".central-text-lines-bottom-arrow-component").attr("stroke","#ddd")}).on("mouseout",function(){d3.selectAll(".central-text-lines-bottom-arrow-component").attr("stroke","#fff")}).on("click",function(t,e){te(1),Zt(!0,Ct)}),t.append("text").attr("class","central-text").attr("id","central-text").attr("x",N/2).attr("y",I/2+10).attr("text-anchor","middle").attr("font-size","22px").text(It.generic.antimicrobials[et[nt].trim()].capitalizeFirstLetter()).attr("opacity",0).attr("font-weight","400").attr("fill","#fff").attr("clip-path","url(#clipper2)").style("display","none"),t.append("text").attr("class","central-text").attr("id","central-text-pre").attr("x",N/2).attr("y",I/2-10).attr("text-anchor","middle").attr("font-size","22px").text("").attr("opacity",0).attr("font-weight","400").attr("fill","#fff").attr("clip-path","url(#clipper2)").style("display","none"),t.append("text").attr("class","central-text").attr("id","central-text-post").attr("x",N/2).attr("y",I/2+30).attr("text-anchor","middle").attr("font-size","22px").text("").attr("opacity",0).attr("font-weight","400").attr("fill","#fff").attr("clip-path","url(#clipper2)").style("display","none"),(m=g.append("g").attr("text-anchor","middle").attr("opacity",0)).append("circle").attr("id","central").attr("cx",N/2).attr("cy",I/2).attr("r",0).attr("fill",H).attr("stroke",D).attr("stroke-width",0),f.append("circle").attr("id","central-dotted").attr("cx",N/2).attr("cy",I/2).attr("r",0).attr("fill","transparent").attr("stroke",V).attr("stroke-dasharray","3,3").attr("stroke-width","4"),f.append("path").attr("id","central-dotted-arced").attr("fill","transparent").attr("stroke",V).attr("stroke-dasharray","2,2").attr("stroke-width","10"),f.append("rect").attr("id","central-dotted-arced-mask").attr("x",N/2-120).attr("width",0).attr("y",I/2+55).attr("height",120).attr("fill",H).attr("opacity",0),f.append("rect").attr("id","comparison-top-mask").attr("x",N/2-180).attr("width",360).attr("y",I/2-2.2*U).attr("height",1.8*U).attr("fill",V).attr("rx",110).attr("clip-path","url(#clipper3)").style("display","none"),(h=f.append("g")).attr("text-anchor","middle").attr("opacity",0).style("display","none").attr("id","central-group-text"),h.append("text").attr("id","central-text-1").attr("x",N/2).attr("y",I/2-(B-145)).attr("fill","white").attr("font-size",Ft.other_labels.central_area_name[Xt]).attr("font-weight","700").style("display","none"),h.append("text").attr("id","central-text-2").attr("x",N/2).attr("y",I/2-(B-175)).attr("fill","white").attr("font-size",Ft.other_labels.central_area_composite_text[Xt]).attr("font-weight","400").style("display","none"),h.append("text").attr("id","central-text-3").attr("x",N/2).attr("y",I/2-(B-195)).attr("fill","white").attr("font-size",Ft.other_labels.central_area_composite_text[Xt]).attr("font-weight","400").style("display","none"),h.append("text").attr("id","central-text-4").attr("x",N/2).attr("y",I/2-40).attr("fill","white").attr("font-size","18px").style("display","none"),h.append("text").attr("id","central-text-6").attr("x",N/2).attr("y",I/2+110).attr("fill","white").attr("font-size","24px").attr("font-weight","700").style("display","none"),h.append("text").attr("id","central-text-perc").attr("x",N/2).attr("y",I/2+45).attr("fill","white").attr("font-size","56px").attr("font-weight","700").style("display","none"),h.append("rect").attr("id","central-text-5-rect").attr("x",N/2-120).attr("y",I/2+130).attr("width",240).attr("height",40).attr("fill","#d0d0d0").style("cursor","pointer").attr("rx",7).attr("ry",7).style("display","none").on("mouseover",function(){d3.select(this).attr("fill","#f0f0f0")}).on("mouseout",function(){d3.select(this).attr("fill","#d0d0d0")}).on("click",Jt),h.append("text").attr("id","central-text-5b").attr("x",N/2).attr("y",I/2+157).attr("fill","#555").text(It.other_labels.compare_antimicrobials).attr("font-size",Ft.other_labels.switch_comparison_button[Xt]).attr("pointer-events","none").style("display","none");var e=h.append("g");e.attr("id","central-comparison-texts");for(var a=(P-O-10)/O,r=0;r<O;r++)e.append("rect").attr("x",N/2-15-P/2+r*(a+1)).attr("width",a).attr("y",I/2+1).attr("height",17).attr("fill","white").attr("opacity",.5),e.append("rect").attr("x",N/2-15-P/2+r*(a+1)).attr("width",a).attr("y",I/2+1).attr("height",0).attr("fill","white").attr("class","central-comparison-bar-1-part"),e.append("rect").attr("x",N/2-15-P/2+r*(a+1)).attr("width",a).attr("y",I/2+51).attr("height",17).attr("fill","white").attr("opacity",.5),e.append("rect").attr("x",N/2-15-P/2+r*(a+1)).attr("width",a).attr("y",I/2+51).attr("height",0).attr("fill","white").attr("class","central-comparison-bar-2-part");e.append("text").attr("id","comparison-text-bar-text-1").attr("x",N/2-P/2-10).attr("y",I/2-5).attr("fill","white").attr("text-anchor","start").attr("font-size",17).text(It.generic.species[n===c?"Broilers":"Meat from broilers"]),e.append("circle").attr("cx",N/2+P/2).attr("cy",I/2+10).attr("r",23).attr("fill","#00abe8"),e.append("text").attr("x",N/2+P/2-1).attr("y",I/2+16).attr("fill","white").attr("text-anchor","middle").attr("font-size",20).attr("font-weight","bold").text("60%").attr("id","central-comparison-value-1"),e.append("text").attr("id","comparison-text-bar-text-2").attr("x",N/2-P/2-10).attr("y",I/2+45).attr("fill","white").attr("text-anchor","start").attr("font-size",17).text(It.generic.species[n===c?"Fattening turkeys":"Meat from turkeys"]),e.append("circle").attr("cx",N/2+P/2).attr("cy",I/2+60).attr("r",23).attr("fill","#00abe8"),e.append("text").attr("x",N/2+P/2-1).attr("y",I/2+66).attr("fill","white").attr("text-anchor","middle").attr("font-size",20).attr("font-weight","bold").text("30%").attr("id","central-comparison-value-2")}(),re(),ae()),e()}})}function jt(t,e){$.ajax({url:"/sites/default/files/interactive_tools/dataviz_2017/i18n/"+t+".json",method:"GET",dataType:"json",success:function(t){var a,r;a=t,r=e,$.ajax({url:"/sites/default/files/interactive_tools/dataviz_2017/i18n/_dims.json",method:"GET",dataType:"json",success:function(t){Ft=t,r(a)}})}})}var Wt,qt=e[0],Xt=null,Dt=(Wt=navigator.language).indexOf("it")>-1?"it":Wt.indexOf("en")>-1?"en":Wt.indexOf("fr")>-1?"fr":Wt.indexOf("de")>-1?"de":null;Xt=Dt||qt;var Vt=function(t,a){t=t||"",a=a||"";for(var r=0;r<e.length;r++){var n=e[r];if(t.indexOf(a+n+a)>-1)return n}return null}(window.location.href,"/");Xt=Vt||Xt;var Ht=window.location.search,Qt=null;function Yt(t){yt=[t.macroregions.eastern_europe,t.macroregions.southern_europe,t.macroregions.western_europe,t.macroregions.northern_europe],st=t.other_labels.all_antimicrobials,ct=t.other_labels.all_countries,dt=t.other_labels.data_not_available,pt=t.other_labels.default_country,ut=t.other_labels.default_antimicrobial}function Jt(){Ot=1-Ot,$("#central-text-5b").html(Ot===Tt?It.other_labels.compare_antimicrobials:It.other_labels.compare_countries),d3.selectAll(".macronation-all").style("display",function(){return Ot===Tt?"block":"none"}),d3.selectAll(".macronation-all-text").style("display",function(){return Ot===Tt?"block":"none"}),Le(),he(),wt=null,$t=null,kt=null,Gt(!1,function(){Ot===Pt?(mt=0,ht=_.size(et),_.each(tt,function(t,e){t.toLowerCase()===At.toLowerCase()&&(nt=e)}),nt>_.size(tt)-1&&(nt=_.size(tt)-1)):(mt=0,ht=_.size(tt),_.each(et,function(t,e){t.toLowerCase()===At.toLowerCase()&&(nt=e)}),nt>_.size(et)-1&&(nt=_.size(et)-1)),pe(!1),Zt(!1,null),re(),d3.select("#central-text").attr("opacity",1),d3.select("#central-text-pre").attr("opacity",1),d3.select("#central-text-post").attr("opacity",1),ae(),window.setTimeout(function(){ee(),d3.selectAll(".macronations-line").attr("opacity",1),d3.selectAll(".macronations-line-text").attr("opacity",1),Me(),Ee(),ge()},500)})}function Kt(t){return"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 "+t+" -5"}function Zt(t,e){if(_e())return!1;var a=e?e===Ct?-300:300:0;d3.select("#central-text").transition().duration(100).attr("x",N/2+a),d3.select("#central-text-pre").transition().duration(100).attr("x",N/2+a),d3.select("#central-text-post").transition().duration(100).attr("x",N/2+a),window.setTimeout(function(){t&&gtag("event","Change "+(Ot===Tt?"Antimicrobial":"Country"),{event_category:"Change "+(Ot===Tt?"Antimicrobial":"Country"),event_label:Ot===Tt?et[nt]:tt[nt]});var e="";switch(Ot){case Tt:e=It.generic.antimicrobials[et[nt].trim()];break;case Pt:e=It.generic.countries[tt[nt]]}var r=e.indexOf(" "),n=e.indexOf(" ",r+1);if(r>0&&n>0){var i=e.substring(0,r);if(d3.select("#central-text-pre").text(i.capitalizeFirstLetter()),(r=(l=e.substring(r+1,e.length)).indexOf(" "))>0){i=l.substring(0,r);d3.select("#central-text").text(i.capitalizeFirstLetter());var l=l.substring(r+1,l.length);d3.select("#central-text-post").text(l.capitalizeFirstLetter())}else d3.select("#central-text").text(l.capitalizeFirstLetter()),d3.select("#central-text-post").text("");d3.selectAll("#central-text-lines-top line").each(function(t){d3.select(this).attr("position")||d3.select(this).attr("position","low"),d3.select(this).attr("position")&&"high"!==d3.select(this).attr("position")&&(d3.select(this).attr("y1",Number(d3.select(this).attr("y1"))-15),d3.select(this).attr("y2",Number(d3.select(this).attr("y2"))-15)),d3.select(this).attr("position","high")}),d3.selectAll("#central-text-lines-top circle").each(function(t){d3.select(this).attr("position")||d3.select(this).attr("position","low"),d3.select(this).attr("position")&&"high"!==d3.select(this).attr("position")&&d3.select(this).attr("cy",Number(d3.select(this).attr("cy"))-15),d3.select(this).attr("position","high")}),d3.selectAll("#central-text-lines-bottom line").each(function(t){d3.select(this).attr("position")||d3.select(this).attr("position","low"),d3.select(this).attr("position")&&"high"!==d3.select(this).attr("position")&&(d3.select(this).attr("y1",Number(d3.select(this).attr("y1"))+15),d3.select(this).attr("y2",Number(d3.select(this).attr("y2"))+15)),d3.select(this).attr("position","high")}),d3.selectAll("#central-text-lines-bottom circle").each(function(t){d3.select(this).attr("position")||d3.select(this).attr("position","low"),d3.select(this).attr("position")&&"high"!==d3.select(this).attr("position")&&d3.select(this).attr("cy",Number(d3.select(this).attr("cy"))+15),d3.select(this).attr("position","high")})}else d3.select("#central-text-pre").text(""),d3.select("#central-text").text(e.capitalizeFirstLetter()),d3.select("#central-text-post").text(""),d3.selectAll("#central-text-lines-top line").each(function(t){d3.select(this).attr("position")&&"low"!==d3.select(this).attr("position")&&(d3.select(this).attr("y1",Number(d3.select(this).attr("y1"))+15),d3.select(this).attr("y2",Number(d3.select(this).attr("y2"))+15)),d3.select(this).attr("position","low")}),d3.selectAll("#central-text-lines-top circle").each(function(t){d3.select(this).attr("position")&&"low"!==d3.select(this).attr("position")&&d3.select(this).attr("cy",Number(d3.select(this).attr("cy"))+15),d3.select(this).attr("position","low")}),d3.selectAll("#central-text-lines-bottom line").each(function(t){d3.select(this).attr("position")&&"low"!==d3.select(this).attr("position")&&(d3.select(this).attr("y1",Number(d3.select(this).attr("y1"))-15),d3.select(this).attr("y2",Number(d3.select(this).attr("y2"))-15)),d3.select(this).attr("position","low")}),d3.selectAll("#central-text-lines-bottom circle").each(function(t){d3.select(this).attr("position")&&"low"!==d3.select(this).attr("position")&&d3.select(this).attr("cy",Number(d3.select(this).attr("cy"))-15),d3.select(this).attr("position","low")});if(t)switch(Ot){case Tt:$("#circular-selector-"+nt).d3Trigger("click");case Pt:$("#circular-selector-"+nt).d3Trigger("click")}d3.select("#central-text").attr("x",N/2-a),d3.select("#central-text-pre").attr("x",N/2-a),d3.select("#central-text-post").attr("x",N/2-a),window.setTimeout(function(){d3.select("#central-text").transition().duration(200).attr("x",N/2),d3.select("#central-text-pre").transition().duration(200).attr("x",N/2),d3.select("#central-text-post").transition().duration(200).attr("x",N/2)},100)},130),re(),ve()}function te(t){var e=Ot===Tt?It.generic.antimicrobials[et[nt].trim()]:It.generic.countries[tt[nt].trim()],a=[];_.each(Ot===Tt?et:tt,function(t){var e=Ot===Tt?It.generic.antimicrobials[t.trim()]:It.generic.countries[t.trim()];a.push(e)});var r=a.sort(),n=r.indexOf(e);t<0?--n<0&&(n=r.length-1):t>0&&++n>r.length-1&&(n=0),e=r[n],_.each(Ot===Tt?et:tt,function(t,a){var r=Ot===Tt?It.generic.antimicrobials[t.trim()]:It.generic.countries[t.trim()];e===r&&(nt=a)})}function ee(){if(null===$t){f.selectAll("#macronations-line-text-zoomed").remove(),f.selectAll(".macronations-line").remove(),f.selectAll(".macronations-line-text").remove(),f.selectAll(".macronation-all").remove(),f.selectAll(".macronation-all-text").remove(),f.selectAll(".macronation-all-guide").remove();var t=d3.arc().innerRadius(G-3).outerRadius(G-8).startAngle(.5).endAngle(5.83);if(f.append("path").attr("class","macronation-all-guide").attr("d",t).attr("fill","#f0f0f0").attr("transform","translate("+N/2+", "+I/2+")").attr("opacity",0),Ot===Tt){xt.E=xt.S=xt.W=xt.N=0;var e=ue(K,B),a=0,r=[.5,0,0,0,0];_.each(e,function(t,n){t&&e[n-1]&&t.region!==ft[a]?(xt[ft[a]]++,r[a+1]=(t.radiant+e[n-1].radiant)/2,a++):xt[ft[a]]++}),r[4]=J-.5,xt.E--,xt.S+=xt.E,xt.W+=xt.S,xt.N+=xt.W+1;for(var n=0;n<4;n++){var i=d3.arc().innerRadius(G).outerRadius(G+40).startAngle(r[0]+.03+.16*n).endAngle(r[0]+.17+.16*n);f.append("path").attr("id","macronation-all-"+n).attr("class","macronation-all").attr("d",i).attr("fill",Q).style("display","none").attr("cursor","pointer").attr("transform","translate("+N/2+", "+I/2+" )").on("mouseover",function(t,e){d3.select(this).attr("fill","#f0f0f0")}).on("mouseout",function(t,e){d3.select(this).attr("fill",Q)}),f.append("text").attr("id","macronation-all-text-"+n).attr("class","macronation-all-text").attr("fill","#888888").attr("text-anchor","middle").attr("dy",25).attr("font-size","18px").attr("font-weight",700).style("display","none").attr("pointer-events","none").append("textPath").attr("class","textpath").attr("startOffset","15%").attr("xlink:href","#macronation-all-"+n).text("")}f.selectAll(".macronation-all").on("click",function(t,e){if(0===e)wt=null,kt=null,he(),$e(t,Nt,d3.select("#macronation2-"+Nt),function(){Ne(t,$t,d3.select("#macronation2-"+$t),function(){ge()})});else{wt=null,kt=null,he();var a=d3.select(this).attr("key"),r=[];for(var n in ft)r.push(It.macroregions[ft[n].toLowerCase()]);var i=r.indexOf(a);$e(t,i,d3.select("#macronation2-"+i),function(){})}});for(n=0;n<4;n++){var l=d3.arc().innerRadius(G).outerRadius(G+50).startAngle(r[n]+.05).endAngle(r[n+1]-.05),o=d3.arc().innerRadius(G).outerRadius(G+50).startAngle(r[n]+(n?.02:.05)).endAngle(r[n+1]-(n-3?.02:.05)),s=l().split("L")[0],c=o().split("L")[1];l=function(){return s+"L"+c};var d=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(r[n]+(n?.025:.05)).endAngle(r[n+1]-(n-3?.025:.05)),p=(o=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(r[n]+(n?.02:.05)).endAngle(r[n+1]-(n-3?.02:.05)),d().split("L")[0]),u=o().split("L")[1];d=function(){return p+"L"+u},f.append("path").attr("class","macronations-line macronation-line-"+n).attr("d",l).attr("id","macronation2-"+n).attr("fill",H).attr("stroke",H).attr("i",n).attr("opacity",0).attr("startAngle",r[n]+.03).attr("endAngle",r[n+1]-.03).attr("key",function(){return ft[n]}).attr("cursor","pointer").attr("transform","translate("+N/2+", "+I/2+" )").on("mouseover",function(t,e){null===$t&&d3.select(this).attr("fill",V)}).on("mouseout",function(t,e){null===$t&&d3.select(this).attr("fill",H)}),f.append("path").attr("class","macronations-line macronations-line-sec macronation-line-"+n).attr("d",d).attr("id","macronation2b-"+n).attr("stroke","#95b863").attr("fill","#95b863").attr("i",n).attr("opacity",0).attr("startAngle",r[n]+.03).attr("endAngle",r[n+1]-.03).attr("key",function(){return ft[n]}).attr("transform","translate("+N/2+", "+I/2+" )");var y=0===n||3===n?"23%":"74%",x=0===n||3===n?27:32;f.append("text").attr("class","macronations-line-text macronation-line-text-"+n).attr("fill","#ffffff").attr("text-anchor","middle").attr("dy",x).attr("ody",x).attr("font-size","18px").attr("font-weight",700).attr("opacity",0).attr("pointer-events","none").attr("key",function(){return ft[n]}).append("textPath").attr("class","textpath").attr("startOffset",y).attr("ostartOffset",y).attr("xlink:href","#macronation2-"+n).text(yt[n])}d3.selectAll(".macronations-line").on("click",function(t){if(null===$t){var e=parseInt(d3.select(this).attr("i"));d3.select(this).attr("fill",H),Nt=e,wt=null,kt=null,he(),Ne(t,e,d3.select(this),function(){ge()})}})}}}function ae(){y||(y=f.append("g")),x||(x=f.append("g")),x.selectAll(".nation-text").remove(),x.selectAll(".nation-text-cmp").remove(),x.selectAll(".nation-text").data(Mt).enter().append("text").attr("class","nation-text").attr("text-anchor","middle").attr("x",N/2).attr("y",I/2).style("pointer-events","none").attr("font-size","14px").attr("font-weight","bold").attr("opacity",0).text(function(t){return Ot===Pt?It.generic.antimicrobials[t.code.trim()].capitalizeFirstLetter():t.code}),x.selectAll(".nation-text-cmp").data(Mt).enter().append("text").attr("class","nation-text-cmp").attr("text-anchor","middle").attr("x",N/2).attr("y",I/2).style("pointer-events","none").attr("font-size","14px").attr("font-weight","bold").attr("opacity",0).text(function(t){return t.code}),x.selectAll(".nation-text-perc").remove(),x.selectAll(".nation-text-perc-cmp").remove(),x.selectAll(".nation-text-perc").data(Mt).enter().append("text").attr("class","nation-text-perc").attr("text-anchor","middle").attr("x",N/2).attr("y",I/2).attr("fill","#fff").style("pointer-events","none").attr("font-size","29px").attr("font-weight","bold").attr("opacity",0).text(function(t,e){var a=n?oe(Mt[e].value,p):le(Mt[e].value);return a<0?"":a<=100?(+a.toFixed(1)).toLocaleString(Xt)+"%":void 0}),x.selectAll(".nation-text-perc-cmp").data(Mt).enter().append("text").attr("class","nation-text-perc-cmp").attr("text-anchor","middle").attr("x",N/2).attr("y",I/2).attr("fill","#fff").style("pointer-events","none").attr("font-size","29px").attr("font-weight","bold").attr("opacity",0).text(function(t,e){if(!n)return"?%";var a=oe(Mt[e].value,u);return a<0?"":a<=100?(+a.toFixed(1)).toLocaleString(Xt)+"%":void 0})}function re(){t=W/100}function ne(e){return le(e)<0?0:q+le(e)*t}function ie(e,a){return oe(e,a)<0?0:q+oe(e,a)*t}function le(t){return t["lev0_"+it]["lev1_"+lt]["lev2_"+nt]}function oe(t,e){return t["lev0_"+it]["lev1_"+e]["lev2_"+nt]}function se(t,e){return N/2+Math.sin(t)*e}function ce(t,e){return I/2-Math.cos(t)*e}function de(t,e){return{x:se(t,e),y:ce(t,e)}}function pe(t){var e,a,r,n;e=0,a=_.size(Et),r=new Array(a),n=ft.concat(["X"]),_.each(n,function(t){for(var n=0;n<a;n++)Et[n].region===t&&(r[e]=Et[n],e++)}),Mt=r,re(),t&&xe(ue(K,B),null)}function ue(t,e){if(Ot===Tt){var a=[],r=_.map(Mt,function(t){return t&&"X"!==t.region?n?ie(t.value,p):ne(t.value):0});if(n){a=_.map(Mt,function(t){return t&&"X"!==t.region?ie(t.value,u):0});r=a}var i=_.reduce(r,function(t,e,a){return a>=mt&&a<=ht&&e>0?t+2*e+8:t+4},0),l=ht-mt,o=1/e,s=o*((J-t)*e-i)/l;s+=.006,l<10&&(s/=5,s*=4);for(var c=(2*Math.PI-2*K)/(l+1),d=[],f=t,y=0,x=0,m=0;m<mt;m++)d.push({x:N/2,y:-500,radiant:0,region:"X"}),x++;_.each(r,function(t,a){a>=mt&&a<ht&&Mt[a]&&(n?f+=c:(y=a>0?o*r[a-1]:0,f+=y+o*t,f+=s),d.push(de(f,e)),d[x].radiant=f,d[x].region=Mt[a].region,"EU"===Mt[a].code&&(d[x].radiant=0,d[x].x=N/2,d[x].y=I/2-B,n&&(d[x].y=-3e3)),x++)});for(m=ht;m<_.size(tt);m++)Mt[m]&&"EU"===Mt[m].code?n?d.push({x:N/2,y:-3e3,radiant:0,region:"X"}):d.push({x:N/2,y:I/2-B,radiant:0,region:"X"}):d.push({x:N/2,y:-500,radiant:0,region:"X"}),x++;if(n){f=t,y=0,0;for(m=0;m<mt;m++)d.push({x:N/2,y:-500,radiant:0,region:"X"}),x++;_.each(a,function(t,e){e>=mt&&e<ht&&Mt[e]&&(n?f+=c:(y=e>0?o*a[e-1]:0,f+=y+s+o*t),d.push(de(f,T)),d[x].radiant=f,d[x].region=Mt[e].region,"EU"===Mt[e].code&&(d[x].radiant=0,d[x].x=N/2,d[x].y=-3e3),x++)});for(m=x;m<2*_.size(tt);m++)Mt[m]&&"EU"===Mt[m].code?n?d.push({x:N/2,y:-3e3,radiant:0,region:"X"}):d.push({x:N/2,y:I/2-T,radiant:0,region:"X"}):d.push({x:N/2,y:-500,radiant:0,region:"X"}),x++}return d}var h=_.size(et),g=Math.ceil(h/2);for(d=[],m=0;m<g;m++)f=t+.25*m,d.push(de(f,e)),d[mt+m].radiant=f,d[mt+m].region=Mt[m].region;for(m=g;m<h;m++)f=2*t+.25*m-.125,d.push(de(f,e)),d[mt+m].radiant=f,d[mt+m].region=Mt[m].region;if(n){for(m=0;m<g;m++)f=t+.25*m,d.push(de(f,T)),d[mt+m+h].radiant=f,d[mt+m+h].region=Mt[m].region;for(m=g;m<h;m++)f=2*t+.25*m-.125,d.push(de(f,T)),d[mt+m+h].radiant=f,d[mt+m+h].region=Mt[m].region}return d}function fe(t){var e=ue(K,B),a=_.size(e);f.selectAll(".gooey").filter(function(t,e){return+t.p===A}).transition().ease(d3.elasticGooeys).delay(function(e,a){return t+700*Math.random()}).duration(function(e,a){return t+4e3}).attr("r",function(t,e){var r=0;return n?r=Mt[e]?ie(Mt[e].value,p):ie(Mt[e-a/2].value,u):Mt[e]&&(r=ne(Mt[e].value)),d3.select(this).attr("or",r),r}).attr("cx",function(t,a){return e[a]&&a<e.length?e[a].x:N/2}).attr("cy",function(t,a){return e[a]?a<e.length?e[a].y:I/2:-500}).attr("fill",function(t,e){var r="#333";return n?r=Mt[e]?Ut(oe(Mt[e].value,p)):Ut(oe(Mt[e-a/2].value,u)):Mt[e]&&(r=Ut(le(Mt[e].value))),d3.select(this).attr("ofill",r),r})}function ye(t,e,a){return n?e>a?20+0*(e-a):20+0*(a-e):null===a||a<0?20:e>a?20+20*(e-a):20+20*(a-e)}function xe(t,e){var a=_.size(t),r=Ot===Tt?tt:et,i=_.size(r),l=Math.ceil(_.size(et)/2);if(d3.selectAll(".gooey-nationed").transition().ease(d3.elasticGooeys).delay(function(t,a){return ye(0,a,e)}).duration(3e3).attr("r",function(t,e){return n?e===wt||e===kt||e+i===wt||e+i===kt||e-i===wt||e-i===kt?X:d3.select(this).attr("or"):e===wt||e===kt?X:d3.select(this).attr("or")}).attr("fill",function(t,e){return n?e===wt||e===kt||e+i===wt||e+i===kt||e-i===wt||e-i===kt?H:d3.select(this).attr("ofill"):e===wt||e===kt?H:d3.select(this).attr("ofill")}).attr("cx",function(e,a){return t[a]?t[a].x:N/2}).attr("cy",function(e,a){return t[a]?t[a].y:-500}),d3.selectAll(".gooey-border").transition().ease(d3.elasticGooeys).delay(function(t,a){return ye(0,a,e)}).duration(3e3).attr("fill","transparent").attr("stroke","white").attr("r",function(e,a){if(!n&&a===wt||a+i===wt||a<i&&a===wt)return 40;if(a===kt||!t[a]||n&&(a+i===wt||a+i===kt||a-i===wt||a-i===kt))return 0;var r=d3.selectAll(".gooey-nationed").filter(function(t,e){return a===e}).attr("or");return(r=zt?+r+1:+r-2)<0&&(r=0),r}).attr("cx",function(e,a){return t[a]?t[a].x:N/2}).attr("cy",function(e,a){return t[a]?t[a].y:-500}),d3.selectAll(".nation-text").transition().ease(d3.elasticGooeys).delay(function(t,a){return ye(0,a,e)}).duration(3e3).attr("opacity",function(e,a){if(n){if(oe(Mt[a].value,p)<0)return 0}else if(!Mt[a]||le(Mt[a].value)<0)return 0;return Ot===Pt?1:a!==wt&&a!==wt-i&&t[a]?1:0}).attr("fill",function(e,a){return Ot===Pt?"#888":t[a]?a===wt||a===kt||a+i===wt||a+i===kt?"white":Bt(n?oe(Mt[a].value,p):le(Mt[a].value)):"white"}).attr("x",function(e,a){var r=t[a]?t[a].x:d3.select(this).attr("x");return Ot===Pt&&(a<l?(r+=50,a===l-1&&(r-=15)):(r-=50,a===l&&(r+=15))),r}).attr("y",function(e,a){if(t[a]){if(Ot===Pt){var r=t[a].y+7;return a!==l&&a!==l-1||(r+=15),a===et.length-1&&(r-=15),d3.select(this).attr("oy",r),r}r=a===wt||a===kt||a+i===wt||a+i===kt?t[a].y-20:t[a].y+5;return d3.select(this).attr("oy",r),r}return d3.select(this).attr("y")}).attr("font-size",function(t,e){return Ot===Pt?"18px":"14px"}).attr("font-weight",function(t,e){return Ot===Pt?"normal":"bold"}).attr("text-anchor",function(t,e){return Ot===Pt?e<l?"start":"end":"middle"}),d3.selectAll(".nation-text-cmp").transition().ease(d3.elasticGooeys).delay(function(t,r){return ye(0,r+a/2,e)}).duration(3e3).style("display",function(){return n?"block":"none"}).attr("opacity",function(e,a){return n&&oe(Mt[a].value,u)<0?0:Ot===Pt?1:a!==wt&&a!==wt-i&&t[a]?1:0}).attr("fill",function(e,a){if(n)return Ot===Pt?"#fff":t[a]?a===wt||a===kt||a+i===wt||a+i===kt?"white":Bt(oe(Mt[a].value,u)):"white"}).attr("x",function(e,a){var r=+(t[a+i]?t[a+i].x:d3.select(this).attr("x"));return Ot===Pt&&(a<l?r+=70:r-=70),r}).attr("y",function(e,a){if(t[a+i]){if(Ot===Pt){var r=t[a+i].y+5;return d3.select(this).attr("oy",r),r}r=a===wt||a===kt||a+i===wt||a+i===kt?t[a+i].y-20:t[a+i].y+5;return d3.select(this).attr("oy",r),r}return d3.select(this).attr("y")}).attr("font-size",function(t,e){return Ot===Pt?"18px":"14px"}).attr("font-weight",function(t,e){return Ot===Pt?"normal":"bold"}).attr("text-anchor",function(t,e){return Ot===Pt?e<l?"start":"end":"middle"}),d3.selectAll(".nation-text-perc").transition().ease(d3.elasticGooeys).delay(function(t,a){return ye(0,a,e)}).duration(3e3).attr("opacity",function(e,a){return t[a]&&(a===wt||a===kt||a+i===wt||a+i===kt)?1:0}).attr("x",function(e,a){return t[a]?t[a].x:d3.select(this).attr("x")}).attr("y",function(e,a){return Ot===Pt?t[a]?t[a].y+15:d3.select(this).attr("y"):t[a]?a===wt||a+i===wt?t[a].y+10:t[a].y+30:d3.select(this).attr("y")}),d3.selectAll(".nation-text-perc-cmp").transition().ease(d3.elasticGooeys).delay(function(t,r){return ye(0,r+a/2,e)}).duration(3e3).attr("opacity",function(e,a){return t[a+i]&&(a===wt||a===kt||a+i===wt||a+i===kt)?1:0}).attr("x",function(e,a){return t[a+i]?t[a+i].x:d3.select(this).attr("x")}).attr("y",function(e,a){return Ot===Pt?t[a+i]?t[a+i].y+15:d3.select(this).attr("y"):t[a+i]?a+i===wt?t[a+i].y+10:t[a+i].y+30:d3.select(this).attr("y")}),n){var o=[];_.each(t,function(t,e){t&&e>=mt&&e<ht&&"X"!==t.region&&o.push({x:t.x,y:t.y})}),4===n?(d3.select("#comparison-circle-guide-text-1-text").text(It.generic.species.Broilers.toUpperCase()),d3.select("#comparison-circle-guide-text-2-text").text(It.generic.species["Fattening turkeys"].toUpperCase())):(d3.select("#comparison-circle-guide-text-1-text").text(It.generic.species["Meat from broilers"].toUpperCase()),d3.select("#comparison-circle-guide-text-2-text").text(It.generic.species["Meat from turkeys"].toUpperCase())),d3.selectAll(".comparison-circle-guide-line").transition().ease(d3.elasticGooeys).duration(3e3).attr("x1",function(t,e){return o[e]&&null!==o[e]?o[e].x:0}).attr("x2",function(t,e){return o[e]&&null!==o[e]?N/2:0}).attr("y1",function(t,e){return o[e]&&null!==o[e]?o[e].y:0}).attr("y2",function(t,e){return o[e]&&null!==o[e]?I/2:0}).attr("opacity",.7)}}function me(t,e){var a=d3.selectAll(".gooey-nationed").filter(function(t,a){return a===e}).attr("or"),r=1/B*(X-a),i=1/B*(X-a),l=_.size(t);return n&&e>l/2&&(e-=l/2),_.each(t,function(a,o){if(a&&(o>=mt&&o<ht||n&&o>=l/2+mt&&o<l/2+ht)&&"X"!==a.region){var s=n&&o>=ht?T:B,c=n&&o>=ht?e+l/2:e;o<c?(a.x=se(a.radiant-r,s),a.y=ce(a.radiant-r,s),t[o].radiant-=r):o>c&&(a.x=se(a.radiant+i,s),a.y=ce(a.radiant+i,s),t[o].radiant+=i)}}),t}function he(t,e){m.transition().duration(1e3).attr("opacity",0),h.attr("opacity",0).style("display","none"),b.style("display","block"),w.style("display","block"),d3.select("#central").transition().duration(1e3).attr("r",0),d3.select("#central-dotted").transition().duration(1e3).attr("r",0),zt?d3.select("#central-dotted-arced").transition().delay(300).attr("d","M0,0"):d3.select("#central-dotted-arced").transition().delay(300).attr("d",""),d3.select("#central-dotted-arced-mask").transition().duration(300).attr("opacity",0).attr("width",0),d3.selectAll(".central-text").style("display","block").attr("opacity",1),d3.selectAll(".central-text-pre").style("display","block").attr("opacity",1),d3.selectAll(".central-text-post").style("display","block").attr("opacity",1),d3.select("#central-text-5-rect").style("display","none"),d3.select("#central-text-5a").style("display","none"),d3.select("#central-text-5b").style("display","none"),d3.select("#central-text-1").style("display","none").attr("fill","#fff"),d3.select("#central-text-2").style("display","none").attr("fill","#fff"),d3.select("#central-text-3").style("display","none").attr("fill","#fff"),d3.select("#central-text-4").style("display","none"),d3.select("#central-text-6").style("display","none"),d3.select("#menu-central").attr("display","block"),d3.select("#central-text").style("transform","none").attr("fill","#fff"),d3.select("#central-text").style("display","block"),d3.select("#central-text-arrow-right").style("display","block"),d3.select("#central-text-arrow-left").style("display","block"),d3.select("#central-text-perc").style("display","none"),d3.select("#comparison-top-mask").style("display","none"),d3.selectAll(".switch-button").style("display",n?"none":"block")}function ge(){n?(x.selectAll(".nation-text-perc").attr("font-weight","bold").text(function(t,e){if(Mt[e]){var a=oe(Mt[e].value,p);if(a<0)return"";if(a<=100)return(+a.toFixed(1)).toLocaleString(Xt)+"%"}return e+"?"}),x.selectAll(".nation-text-perc-cmp").attr("font-weight","bold").text(function(t,e){if(Mt[e]){var a=oe(Mt[e].value,u);if(a<0)return"";if(a<=100)return(+a.toFixed(1)).toLocaleString(Xt)+"%"}return e+"?"})):x.selectAll(".nation-text-perc").attr("font-weight","bold").text(function(t,e){if(Mt[e]){var a=le(Mt[e].value);if(a<0)return"";if(a<=100)return(+a.toFixed(1)).toLocaleString(Xt)+"%"}return"?"})}function ve(){_e()||(we(),d3.selectAll(".gooey-nationed").transition().duration(600).attr("r",function(t,e){return e<mt||e>=(n?2*ht:ht)?0:20}).attr("fill",Ut(10)),d3.selectAll(".gooey-border").transition().duration(600).attr("r",function(t,e){return e<mt||e>=(n?2*ht:ht)?0:20}),fe(0),window.setTimeout(function(){xe(ue(K,B),-1),ge(),ke(),Ee(),ee(),d3.selectAll(".macronations-line").attr("opacity",1),d3.selectAll(".macronations-line-text").attr("opacity",1),Me(),d3.selectAll(".switch-button").style("display",n?"none":"block"),window.setTimeout(be,600)},300))}function be(){var t=!1;d3.selectAll(".gooey").each(function(e){d3.select(this).attr("r")>4&&(t=!0)}),d3.selectAll(".data-not-available-message").style("display",t?"none":"block")}function _e(){return a}function we(){a=!0}function ke(){a=!1}function Ae(t){switch(t){case 1:_.size(at);break;case 2:_.size(rt);break;case 3:if(Ot===Tt){_.size(et)+2;break}_.size(tt)+2}1===t||2===t?d3.selectAll(".sel"+t+"-menu-item").transition().ease(d3.easeLinear).duration(200).style("height","0px").style("transform","translate(0, 0)"):zt||vt?(d3.selectAll(".top-menu.sel3-menu").attr("opacity",0).style("display","none"),d3.select("#menu-3-box").attr("opacity",0).style("transform","matrix(0.25, 0, 0, 0.08, 357, 435)")):(d3.select("#menu-3-box").transition().duration(300).attr("opacity",1).style("transform","matrix(1, 0, 0, 0.08, 0, 435)"),window.setTimeout(function(){d3.select("#menu-3-box").transition().duration(300).attr("opacity",0).style("transform","matrix(0.25, 0, 0, 0.08, 357, 435)"),window.setTimeout(function(){d3.selectAll(".top-menu.sel3-menu").attr("opacity",0).style("display","none")},300)},300))}function ze(t){if(_e())return!1;if(t<3&&"0px"!==d3.select(".sel"+t+"-menu-item").style("height"))Ae(t);else{switch(t){case 1:Ae(2),Ae(3);break;case 2:Ae(1),Ae(3);break;case 3:Ae(1),Ae(2)}!function(t){switch(t){case 1:_.size(at);break;case 2:_.size(rt);break;case 3:if(Ot===Tt){_.size(et);break}_.size(tt)}1===t||2===t?d3.selectAll(".sel"+t+"-menu-item").transition().ease(d3.easeLinear).duration(200).style("height",S+"px").style("transform","translate(0, "+S+"px)"):zt||vt?(d3.selectAll(".top-menu.sel3-menu").attr("opacity",1).style("display","block"),d3.select("#menu-3-box").attr("opacity",1).style("transform","scale(1,1)")):(d3.selectAll(".top-menu.sel3-menu").attr("opacity",0).style("display","block").transition().duration(400).attr("opacity",1),d3.select("#menu-3-box").transition().duration(400).attr("opacity",1).style("transform","matrix(1, 0, 0, 0.08, 0, 435)"),window.setTimeout(function(){d3.select("#menu-3-box").transition().duration(400).attr("opacity",1).style("transform","matrix(1, 0, 0, 1, 0, 0)")},400))}(t)}}function Le(){W=Ot===Tt?n?M:E:R}function Se(t,e){if(_e())return!1;Ae(t);var a=0;if(null!==wt){var r=wt;$($(".gooey-nationed")[wt]).d3Trigger("click"),$($(".gooey-nationed")[r]).d3Trigger("mouseout"),a=800}window.setTimeout(function(){switch(t){case 1:it=e;break;case 2:lt=e,ot=e;break;case 3:nt=e,Zt(!1,null)}2===t&&(lt===c?(n=lt,p=i,u=l):lt===d?(n=lt,p=o,u=s):n=null),Le(),n?(d3.select("#nations-line").attr("display","none"),d3.selectAll(".comparison-circle-guide").transition().ease(d3.easeExp).duration(1500).attr("opacity",1),d3.select("#macronation-all-0").style("display","none"),d3.select("#macronation-all-text-0").style("display","none")):(d3.select("#nations-line").attr("display","block"),d3.selectAll(".comparison-circle-guide").transition().ease(d3.easeExp).duration(1500).attr("opacity",0),d3.select("#macronation-all-0").style("display","block"),d3.select("#macronation-all-text-0").style("display","block")),2===t&&n&&null===$t&&$("#macronation2-3").d3Trigger("click"),2===t&&(lt!==d-2&&lt!==d-1||lt--),n||re(),ve()},a)}function Ee(){Ot===Tt?d3.select("#switch-button-text").text(st):d3.select("#switch-button-text").text(ct)}function Me(){if(k){d3.select("#top-menu").remove(),d3.selectAll(".sel3-menu").remove();var t=d3.select("#container").append("div").attr("id","top-menu").style("height",S+"px"),e=t.append("div").attr("class","menu-part left-part").style("font-size",Ft.top_menu.item[Xt]).style("line-height",S+"px").html('<div class="menu-selection">'+It.generic.bacteria[at[it]].text+"</div>"),a=t.append("div").attr("class","menu-part right-part").style("font-size",Ft.top_menu.item[Xt]).style("line-height",S+"px").html('<div class="menu-selection">'+It.generic.species[rt[ot]]+"</div>");e.on("click",function(){d3.event.stopPropagation(),ze(1)}),a.on("click",function(){d3.event.stopPropagation(),ze(2)}),_.each(at,function(t,a){var r=+a===it?"bold":"normal";e.append("div").attr("class","menu-item top-menu sel1-menu-item").style("font-weight",r).style("line-height",S+"px").style("bottom",-(S-1)*a+"px").style("height","0").html(It.generic.bacteria[t].text).on("click",function(e){d3.event.stopPropagation(),gtag("event","Change Bacteria",{event_category:"Change Bacteria",event_label:t}),Se(1,a)})});var r=0;_.each(rt,function(t,e){if(e!==c&&e!==d){var n=+r===lt?"bold":"normal";i=r,l=e,a.append("div").attr("class","menu-item top-menu sel2-menu-item").style("font-weight",n).style("line-height",S+"px").style("bottom",-(S-1)*i+"px").style("height","0").html(It.generic.species[t]).on("click",function(e){d3.event.stopPropagation(),gtag("event","Change Species",{event_category:"Change Species",event_label:t}),Se(2,l)}),r++}var i,l});var n=Ot===Tt?It.other_labels.select_antimicrobial:It.other_labels.select_country,i=f.append("g").attr("class","top-menu sel3-menu").style("display","none").append("g").attr("id","menu-3-box");i.attr("opacity",0),i.style("transform","matrix(0.25, 0, 0, 0.08, 357, 435)"),i.append("rect").attr("x",N/2-300).attr("y",I/2-300).attr("width",600).attr("height",600).attr("fill","white").attr("stroke","#00b18b").attr("stroke-width",5).on("click",function(){d3.event.stopPropagation()}),i.append("circle").attr("cx",N/2).attr("cy",I/2-300).attr("r",30).attr("fill","white").attr("stroke",H).attr("stroke-width",5).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("fill","#f6f6f6")}).on("mouseout",function(){d3.select(this).attr("fill","#ffffff")}),i.append("line").attr("x1",N/2-15).attr("y1",I/2-315).attr("x2",N/2+15).attr("y2",I/2-285).attr("stroke","#00b18b").attr("stroke-width",5).attr("pointer-events","none"),i.append("line").attr("x1",N/2-15).attr("y1",I/2-285).attr("x2",N/2+15).attr("y2",I/2-315).attr("stroke","#00b18b").attr("stroke-width",5).attr("pointer-events","none"),i.append("text").attr("id","third-menu-title").attr("x",N/2).attr("y",I/2-220).attr("text-anchor","middle").attr("font-size","26px").attr("font-weight","bold").attr("fill","#888").text(n),i.append("circle").attr("cx",N/2-30).attr("cy",I/2-175).attr("r",20).attr("fill","white").attr("stroke","#00b18b").attr("stroke-width",3).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("fill","#f6f6f6")}).on("mouseout",function(){d3.select(this).attr("fill","#ffffff")}).on("click",function(){d3.event.stopPropagation(),Ce(40)}),i.append("line").attr("x1",N/2-37).attr("y1",I/2-170).attr("x2",N/2-28).attr("y2",I/2-178).attr("stroke",H).attr("stroke-width",5).attr("pointer-events","none"),i.append("line").attr("x1",N/2-23).attr("y1",I/2-170).attr("x2",N/2-32).attr("y2",I/2-178).attr("stroke",H).attr("stroke-width",5).attr("pointer-events","none"),i.append("circle").attr("cx",N/2+30).attr("cy",I/2-175).attr("r",20).attr("fill","white").attr("stroke","#00b18b").attr("stroke-width",3).attr("cursor","pointer").on("mouseover",function(){d3.select(this).attr("fill","#f6f6f6")}).on("mouseout",function(){d3.select(this).attr("fill","#ffffff")}).on("click",function(){d3.event.stopPropagation(),Ce(-40)}),i.append("line").attr("x1",N/2+37).attr("y1",I/2-178).attr("x2",N/2+28).attr("y2",I/2-170).attr("stroke",H).attr("stroke-width",5).attr("pointer-events","none"),i.append("line").attr("x1",N/2+23).attr("y1",I/2-178).attr("x2",N/2+32).attr("y2",I/2-170).attr("stroke",H).attr("stroke-width",5).attr("pointer-events","none");var l=[];Ot===Tt?(_.each(et,function(t,e){l.push({value:It.generic.antimicrobials[t.trim()],index:e})}),l=l.sort(function(t,e){return t.value>e.value?1:t.value<e.value?-1:0})):(_.each(tt,function(t,e){l[e]={value:It.generic.countries[t],index:e}}),l=l.sort(function(t,e){return t.value>e.value?1:t.value<e.value?-1:0})),_.each(l,function(t,e){var a=+t.index===nt?"bold":"normal";i.append("rect").attr("class","menu3-item").attr("x",N/2-200).attr("oy",I/2-130+50*e).attr("y",I/2-130+50*e).attr("width",400).attr("height",50).attr("fill","#fff").attr("opacity",.25).attr("cursor","pointer").on("mouseover",function(t){d3.select(this).attr("fill",H)}).on("mouseout",function(t){d3.select(this).attr("fill","white")}).on("click",function(e){gtag("event","Change "+(Ot===Tt?"Antimicrobial":"Country"),{event_category:"Change "+(Ot===Tt?"Antimicrobial":"Country"),event_label:"item.value"}),Se(3,t.index)}).attr("clip-path","url(#clipper4)"),i.append("text").attr("class","menu3-item").attr("x",N/2).attr("oy",I/2-97+50*e).attr("y",I/2-97+50*e).attr("fill","#156674").attr("font-size","24px").attr("font-weight",a).attr("text-anchor","middle").attr("pointer-events","none").text(t.value.capitalizeFirstLetter()).attr("clip-path","url(#clipper4)")});var o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";i.on(o,function(){var t=d3.event.deltaY;t||(t=-d3.event.wheelDelta),Ce(t>0?-30:30)})}}""!==Ht&&Ht.indexOf("lang")>-1&&(Qt=Ht.split("=")[1])&&(Xt=Qt),jt(Xt,function(t){Yt(It=t),Gt(!0,function(){})}),$(document).on("translate",function(t,e){!function(t){{var e=window.location.href;return e=e.replace(window.location.search,""),void(window.location=e+"?lang="+t)}if(wt){var a=wt;$($(".gooey-nationed")[wt]).d3Trigger("click"),$($(".gooey-nationed")[a]).d3Trigger("mouseout"),wt=null,setTimeout(function(){$($(".gooey-nationed")[a]).d3Trigger("click")},1500)}jt(t,function(e){$("textPath").each(function(t,a){var r=$(a).html();if(""!==r)for(var n in It){var i=It[n];for(var l in i){var o=i[l];if("string"==typeof o){if(o.toLowerCase()===r.toLowerCase()){var s=e[n][l];r===r.toUpperCase()&&(s=s.toUpperCase()),$(a).html(s)}}else for(var c in o){var d=o[c];if(d===r){var s=e[n][l][c];r===r.toUpperCase()&&(s=s.toUpperCase()),$(a).html(s)}}}}}),Yt(It=e),Xt=t;var a="";a=It.home.text_part_1+"<tspan style='font-style:italic'>"+It.home.text_part_2+"</tspan> "+It.home.text_part_3+"<tspan style='font-style:italic'>"+It.home.text_part_4+"</tspan>",$("#intro-text-0").html(a),d3.selectAll(".intro-title").transition().duration(500).attr("font-size",Ft.home.title[Xt]),d3.selectAll(".intro-text-content").transition().duration(500).attr("font-size",Ft.home.text[Xt]),d3.select("#switch-button-text").transition().duration(500).attr("font-size",Ft.other_labels.switch_button[Xt]),d3.select("#central-text-5b").attr("font-size",Ft.other_labels.switch_comparison_button[Xt])})}(e)}),d3.elasticGooeys=function t(e,a){var r=2*Math.PI,n=Math.asin(1/(e=Math.max(1,e)))*(a/=r);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+n)/a)}return i.amplitude=function(e){return t(e,a*r)},i.period=function(a){return t(e,a)},i}(1,.85);var Re=0;function Ce(t){var e=Ot===Tt?-30*_.size(et):-37*_.size(tt);(t>0&&Re<0||t<0&&Re>=e)&&(Re+=t,d3.selectAll(".menu3-item").attr("y",function(t){return+d3.select(this).attr("oy")+Re}))}function Te(t,e,a,r){var n=(r-90)*Math.PI/180;return{x:t+a*Math.cos(n),y:e+a*Math.sin(n)}}function Pe(t,e,a,r,n){var i=Te(t,e,a,n),l=Te(t,e,a,r),o=n-r<=180?"0":"1";return["M",i.x,i.y,"A",a,a,0,o,0,l.x,l.y].join(" ")}function Oe(t,e,a,r){if(Ae(1),Ae(2),Ae(3),wt===e)r>Mt.length&&(r-=Mt.length),wt=null,he(),d3.selectAll(".nation-text-perc").filter(function(t,a){return a==e||a+tt.length==e}).text(function(t,e){var a=n?oe(Mt[r].value,p):le(Mt[r].value);return a<0?"":a<=100?(+a.toFixed(1)).toLocaleString(Xt)+"%":void 0}).attr("font-weight","bold").attr("font-size",29),d3.selectAll(".nation-text-perc-cmp").filter(function(t,a){return a==e||a+tt.length==e}).text(function(t,e){if(!n)return"?%";var a=oe(Mt[r].value,u);return a<0?"":a<=100?(+a.toFixed(1)).toLocaleString(Xt)+"%":void 0});else{wt=e;Ot===Tt?_.size(tt):_.size(et);var i=r>Mt.length?r-Mt.length:r;At=Mt[i].name,n?function(t,e,a,r){if(n){r>Mt.length&&(r-=Mt.length);var i=oe(Mt[r].value,p),l=oe(Mt[r].value,u),o=P/100*i;o>0&&o<1?o=1:o<0&&(o=0);var s=P/100*l;if(s>0&&s<1?s=1:s<0&&(s=0),d3.selectAll(".switch-button").style("display","none"),b.style("display","none"),w.style("display","none"),Lt||zt){h.style("-webkit-transform","translate(0px, 60px)"),d3.select("#central-comparison-texts").style("-webkit-transform","translate(0px, -40px)"),$("#central-group-text").attr("class","t60");var d=document.querySelector(".t60"),f=getComputedStyle(d).getPropertyValue("transform");d.setAttribute("transform",f),$("#central-comparison-texts").attr("class","t_30"),d=document.querySelector(".t_30"),f=getComputedStyle(d).getPropertyValue("transform"),d.setAttribute("transform",f)}else h.style("transform","translate(0px, 60px)"),d3.select("#central-comparison-texts").style("transform","translate(0px, -40px)");d3.select("#central-comparison-texts").attr("display","block"),d3.select("#central-text-4").style("display","none"),d3.select("#central-text-6").style("display","none"),d3.select("#central-text-perc").style("display","none"),d3.select("#central-text").style("transform","translate(0px, -25px)").attr("fill","#ffffff"),d3.select("#central-text-arrow-right").style("display","none"),d3.select("#central-text-arrow-left").style("display","none"),d3.select("#comparison-text-bar-text-1").text(It.generic.species[n===c?"Broilers":"Meat from broilers"]),d3.select("#comparison-text-bar-text-2").text(It.generic.species[n===c?"Fattening turkeys":"Meat from turkeys"]);var y=100/O;if(d3.select("#menu-central").attr("display","none"),d3.selectAll(".central-comparison-bar-1-part").attr("height",function(t,e){return e*y<i?17:i-e*y>-y?17/y*-(i-e*y):0}).attr("transform",function(t,e){return e*y<i?"translate(0,0)":i-e*y>-y?"translate(0,"+17/y*(y+(i-e*y))+")":"translate(0,0)"}),d3.selectAll(".central-comparison-bar-2-part").attr("height",function(t,e){return e*y<l?17:0}),i<0)d3.select("#central-comparison-value-1").text(It.other_labels.na);else{var x=parseInt(d3.select("#central-comparison-value-1").text());isNaN(x)&&(x=0);var g=setInterval(function(){if(Math.abs(x-i)<2)return d3.select("#central-comparison-value-1").text((+i.toFixed(0)).toLocaleString(Xt)+"%"),void clearInterval(g);x=(x=(x+i)/2)>1?Math.round(x):x.toFixed(1),d3.select("#central-comparison-value-1").text((+x.toFixed(0)).toLocaleString(Xt)+"%")},70)}if(l<0)d3.select("#central-comparison-value-2").text(It.other_labels.na);else{var v=parseInt(d3.select("#central-comparison-value-2").text());isNaN(v)&&(v=0);var _=setInterval(function(){if(Math.abs(v-l)<2)return d3.select("#central-comparison-value-2").text((+l.toFixed(0)).toLocaleString(Xt)+"%"),void clearInterval(_);v=(v=(v+l)/2)>1?Math.round(v):v.toFixed(1),d3.select("#central-comparison-value-2").text((+v.toFixed(0)).toLocaleString(Xt)+"%")},70)}m.transition().attr("opacity",1),h.transition().delay(200).duration(500).attr("opacity",1).style("display","block"),d3.select("#central").transition().ease(d3.easeLinear).duration(300).attr("cx",N/2).attr("cy",I/2).attr("r",B-X-90),d3.select("#central-text-1").style("display","block").text(It.generic.countries[e.name]).attr("fill","#555");var k="",A="",z="",L="";Ot===Tt?("ESBL"===et[nt]||"AmpC"===et[nt]?It.central_area.producing_sequence_code&&1!==It.central_area.producing_sequence_code?(k=It.central_area.prevalence_of+It.generic.bacteria[at[it]].plain_text+It.central_area.producing+It.generic.antimicrobials[et[nt]],A=It.central_area.prevalence_of+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan> "+It.central_area.producing+It.generic.antimicrobials[et[nt]]):(k=It.central_area.prevalence_of+It.generic.antimicrobials[et[nt]]+It.central_area.producing+" "+It.generic.bacteria[at[it]].plain_text,A=It.central_area.prevalence_of+It.generic.antimicrobials[et[nt]]+It.central_area.producing+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>"):(k=It.central_area.resistance_of+It.generic.bacteria[at[it]].plain_text,A=It.central_area.resistance_of+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>"),"ESBL"===et[nt]||et[nt],z=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],L=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]]):("ESBL"===Mt[r].name||"AmpC"===Mt[r].name?(k=It.central_area.prevalence_of+Mt[r].name+It.central_area.producing+It.generic.bacteria[at[it]].plain_text,A=It.central_area.prevalence_of+Mt[r].name+It.central_area.producing+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>"):(k=It.central_area.resistance_of+It.generic.bacteria[at[it]].plain_text,A=It.central_area.resistance_of+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>"),"ESBL"===Mt[r].name||Mt[r].name,z=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],L=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]]),zt||Lt?(d3.select("#central-text-2").style("display","block").text(k).attr("fill","#555"),d3.select("#central-text-3").style("display","block").text(z).attr("fill","#555")):(d3.select("#central-text-2").style("display","block").html(A).attr("fill","#555"),d3.select("#central-text-3").style("display","block").html(L).attr("fill","#555")),window.setTimeout(function(){d3.select("#comparison-top-mask").style("display","block")},150)}}(0,t,0,r):function(t,e,a){var r=le(Mt[a].value);if(b.style("display","none"),w.style("display","none"),d3.selectAll(".switch-button").style("display","none"),d3.select("#comparison-top-mask").style("display","none"),Lt||zt){h.style("-webkit-transform","translate(0px, 0px)"),d3.select("#central-comparison-texts").style("-webkit-transform","translate(0px, 0px)"),$("#central-group-text").attr("class","tnone");var n=document.querySelector(".tnone"),i=getComputedStyle(n).getPropertyValue("transform");n.setAttribute("transform",i),$("#central-comparison-texts").attr("class","tnone"),n=document.querySelector(".tnone"),i=getComputedStyle(n).getPropertyValue("transform"),n.setAttribute("transform",i)}else h.style("transform","none"),d3.select("#central-comparison-texts").style("transform","none");d3.select("#menu-central").attr("display","none"),d3.select("#central-comparison-texts").attr("display","none"),m.transition().attr("opacity",1),h.transition().delay(200).duration(500).attr("opacity",1).style("display","block"),d3.select("#central").transition().ease(d3.easeLinear).duration(300).attr("cx",N/2).attr("cy",I/2).attr("r",B-X),d3.select("#central-dotted").transition().delay(200).duration(500).attr("r",B-X-15),d3.select("#central-dotted-arced-mask").transition().delay(500).duration(0).attr("opacity",1).attr("width",240),d3.selectAll(".central-text").transition().duration(300).attr("opacity",0).delay(300).style("display","none"),d3.select("#central-text").style("display","none");var l="",o="",s="",c="",d="";if(Ot===Tt){if("ESBL"===et[nt]||"AmpC"===et[nt]){var p=It.central_area.producing;"fr"===Xt&&"AmpC"===et[nt]&&(p=" productrices d'"),It.central_area.producing_sequence_code&&1!==It.central_area.producing_sequence_code?(l=It.central_area.prevalence_of+It.generic.bacteria[at[it]].plain_text+p+It.generic.antimicrobials[et[nt]],o=It.central_area.prevalence_of+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan> "+p+It.generic.antimicrobials[et[nt]]):(l=It.central_area.prevalence_of+It.generic.antimicrobials[et[nt]]+p+" "+It.generic.bacteria[at[it]].plain_text,o=It.central_area.prevalence_of+It.generic.antimicrobials[et[nt]]+p+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>"),d=""}else l=It.central_area.resistance_of+It.generic.bacteria[at[it]].plain_text,o=It.central_area.resistance_of+"<tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>",d=It.central_area.resistance;"ESBL"===et[nt]||"AmpC"===et[nt]?(s=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],c=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]]):(s=" "+It.central_area.to[et[nt].trim()]+It.generic.antimicrobials[et[nt].trim()]+" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],c=" "+It.central_area.to[et[nt].trim()]+It.generic.antimicrobials[et[nt].trim()]+" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]])}else"ESBL"===Mt[a].name||"AmpC"===Mt[a].name?(l=It.central_area.prevalence_of+It.generic.antimicrobials[Mt[a].name]+It.central_area.producing+" "+It.generic.bacteria[at[it]].plain_text,o=It.central_area.prevalence_of+It.generic.antimicrobials[Mt[a].name]+It.central_area.producing+" <tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>",d=""):(l=It.central_area.resistance_of+It.generic.bacteria[at[it]].plain_text,o=It.central_area.resistance_of+"<tspan style='font-style:italic'>"+It.generic.bacteria[at[it]].plain_text+"</tspan>",d=It.central_area.resistance),"ESBL"===Mt[a].name||"AmpC"===Mt[a].name?(s=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],c=" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]]):(s=" "+It.central_area.to[Mt[a].name.trim()]+It.generic.antimicrobials[Mt[a].name.trim()]+" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]],c=" "+It.central_area.to[Mt[a].name.trim()]+It.generic.antimicrobials[Mt[a].name.trim()]+" "+It.central_area.in[rt[ot]]+It.generic.species_after_in[rt[ot]]);if(zt||Lt?(s=s.replace("+",It.central_area.to["+"]),d3.select("#central-text-2").style("display","block").text(l).attr("fill","#fff"),d3.select("#central-text-3").style("display","block").text(s).attr("fill","#fff")):(c=c.replace("+",It.central_area.to["+"]),d3.select("#central-text-2").style("display","block").html(o).attr("fill","#fff"),d3.select("#central-text-3").style("display","block").html(c).attr("fill","#fff")),d3.select("#central-text-4").style("display","block").text(d),d3.select("#central-text-5-rect").style("display","block"),d3.select("#central-text-5a").style("display","block"),d3.select("#central-text-5b").style("display","block"),Ot===Tt){var u=It.generic.antimicrobials[et[nt].trim()];d3.select("#central-text-6").style("display","block").text(u.capitalizeFirstLetter()),d3.select("#central-text-1").style("display","block").text(It.generic.countries[Mt[a].name]).attr("fill","#fff")}else{var f=It.generic.countries[tt[nt]];d3.select("#central-text-6").style("display","block").text(It.generic.antimicrobials[Mt[a].name.trim()].capitalizeFirstLetter()),d3.select("#central-text-1").style("display","block").text(f).attr("fill","#fff")}(t=d3.select("#central-text-perc")).style("display","block");var y=d3.select("#central-dotted-arced");y.style("display","block");var x=parseInt(d3.select("#central-text-perc").text());isNaN(x)&&(x=0);var g=2.1*x,v=parseInt(r),_=2.1*v;if(x===v)t.text(x+"%"),t.text((+r.toFixed(1)).toLocaleString(Xt)+"%"),y.attr("d",Pe(N/2,I/2+20,110,-105,-105+g));else{var k=v-x>0?1:-1,A=4;zt&&(A=2);var z=setInterval(function(){x+=k,t.text((+x.toFixed(1)).toLocaleString(Xt)+"%"),g+=(_-g)/10,y.attr("d",Pe(N/2,I/2+20,110,-105,-105+g)),x===v&&(t.text((+r.toFixed(1)).toLocaleString(Xt)+"%"),clearInterval(z))},A)}}(a,0,r),d3.selectAll(".nation-text-perc").filter(function(t,a){return a==e||a+tt.length==e}).text("x").attr("font-weight",100).attr("font-size",40),d3.selectAll(".nation-text-perc-cmp").filter(function(t,a){return a==e||a+tt.length==e}).text("");var l=ue(K,B);"EU"!==t.code&&wt&&(l=me(l,wt)),xe(l,e)}}function $e(t,e,a,r){var n,i,l=a.attr("key");switch(d3.select(".macronation-line-text-"+Nt).select("textPath").text(yt[e]),$t=e,Ie(),l){case"E":n=0,i=xt[l];break;case"S":n=xt.E,i=xt[l];break;case"W":n=xt.S,i=xt[l];break;case"N":n=xt.W,i=xt[l]}mt=n,ht=i,Zt(!1,null),pe(!1),xe(ue(K,B),-1),r()}function Ne(t,e,a,n){if(!r){wt&&(kt=null,Oe(null,wt,null,wt),wt=null);var i=.03,l=.031;if((Lt||zt)&&(i=.06,l=.062),null!==$t){f.selectAll(".macronation-all-guide").attr("opacity",0),r=!0;var o=a.attr("key"),s=0,c=Et.length;switch(o){case"E":z=0,L=xt[o];break;case"S":z=xt.E,L=xt[o];break;case"W":z=xt.S,L=xt[o];break;case"N":z=xt.W,L=xt[o]}if(Lt||zt||St)mt=s,ht=c;else var d=setInterval(function(){z>s&&z--,L<c&&L++,mt=z,ht=L,pe(!0),z<=s&&L>=c&&clearInterval(d)},50);var p=2.2,u=2*Math.PI-2.2,y=+d3.select("#macronation2-"+e).attr("startAngle"),x=+d3.select("#macronation2-"+e).attr("endAngle"),m=2.2,h=2*Math.PI-2.2,g=+d3.select("#macronation2b-"+e).attr("startAngle"),v=+d3.select("#macronation2b-"+e).attr("endAngle"),b=d3.select("#macronation2-"+e),_=d3.select("#macronation2b-"+e),w=setInterval(function(){var t=d3.arc().innerRadius(G).outerRadius(G+45).startAngle(p).endAngle(u);b.attr("d",t);t=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(m).endAngle(h);_.attr("d",t);var e=!0;if(Math.abs(y-p)>l&&(y>p?p+=i:p-=i,e=!1),Math.abs(g-m)>l&&(g>m?m+=i:m-=i,e=!1),Math.abs(x-u)>l&&(x<u?u-=i:u+=i,e=!1),Math.abs(v-h)>l&&(v<h?h-=i:h+=i,e=!1),e){t=d3.arc().innerRadius(G).outerRadius(G+45).startAngle(y).endAngle(x);b.attr("d",t);t=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(g).endAngle(v);_.attr("d",t),clearInterval(w)}},6);$t=null,zt||d3.select(".macronation-line-text-"+e).select("textPath").attr("startOffset",d3.select(".macronation-line-text-"+e).select("textPath").attr("ostartOffset")),d3.select(".macronation-line-text-"+e).attr("dy",d3.select(".macronation-line-text-"+e).attr("ody")),d3.selectAll(".macronation-line-"+e).attr("cursor","pointer"),d3.selectAll(".macronation-all").style("display","none"),d3.selectAll(".macronation-all-text").style("display","none"),(Lt||zt||St)&&window.setTimeout(function(){pe(!0),ge()},600),window.setTimeout(function(){for(var t=0;t<4;t++)e!=t&&(d3.selectAll(".macronation-line-"+t).transition().duration(200).style("display","block"),d3.selectAll(".macronation-line-text-"+t).transition().duration(200).style("display","block"));d3.selectAll(".macronations-line").transition().duration(800).attr("opacity",1),d3.selectAll(".macronations-line-sec").transition().duration(800).attr("opacity",1),d3.selectAll(".macronations-line-text").transition().duration(800).attr("opacity",1),r=!1,Zt(!1,null),n()},1e3)}else{f.selectAll(".macronation-all-guide").attr("opacity",1),r=!0,$t=e,re();for(var k=0;k<4;k++)e!=k&&(d3.selectAll(".macronation-line-"+k).transition().duration(200).attr("opacity",0),d3.selectAll(".macronation-line-text-"+k).transition().duration(200).attr("opacity",0));window.setTimeout(function(){for(var t=0;t<4;t++)e!=t&&(d3.selectAll(".macronation-line-"+t).transition().duration(200).style("display","none"),d3.selectAll(".macronation-line-text-"+t).transition().duration(200).style("display","none"));d3.select(".macronation-line-text-"+e).select("textPath").attr("startOffset","75%"),d3.select(".macronation-line-text-"+e).attr("dy",32),d3.selectAll(".macronation-line-"+e).attr("cursor","default")},250);var A=d3.select(".macronation-line-"+e);o=a.attr("key"),s=0,c=Et.length-1;switch(o){case"E":s=0,c=xt[o]-1;break;case"S":s=xt.E,c=xt[o]-1;break;case"W":s=xt.S+1,c=xt[o];break;case"N":s=xt.W+1,c=xt[o]}var z=0,L=Et.length;if(Lt||zt||St)mt=s-1,ht=c,pe(!0);else d=setInterval(function(){mt=z,ht=L,pe(!0),z<s&&z++,L>c&&L--,z>=s&&L<=c&&clearInterval(d)},50);p=2.2,u=2*Math.PI-2.2,y=+A.attr("startAngle"),x=+A.attr("endAngle"),m=2.2,h=2*Math.PI-2.2,g=+A.attr("startAngle"),v=+A.attr("endAngle"),b=d3.select("#macronation2-"+e),_=d3.select("#macronation2b-"+e);if(zt||St){var S=d3.arc().innerRadius(G).outerRadius(G+45).startAngle(p).endAngle(u);b.attr("d",S);S=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(m).endAngle(h);_.attr("d",S)}else w=setInterval(function(){var t=d3.arc().innerRadius(G).outerRadius(G+45).startAngle(y).endAngle(x);b.attr("d",t);t=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(g).endAngle(v);if(_.attr("d",t),Math.abs(g-m)>l&&(m>g?g+=i:g-=i),Math.abs(v-h)>l&&(h>v?v+=i:v-=i),Math.abs(y-p)>l&&(p>y?y+=i:y-=i),Math.abs(x-u)>l&&(u>x?x+=i:x-=i),g<=m&&v>=h){t=d3.arc().innerRadius(G).outerRadius(G+45).startAngle(p).endAngle(u);b.attr("d",t);t=d3.arc().innerRadius(G).outerRadius(G+8).startAngle(m).endAngle(h);_.attr("d",t),clearInterval(w)}},6);Ie(),window.setTimeout(function(){r=!1,n()},1e3)}}}function Ie(){var t=[It.macroregions.all,It.macroregions.e,It.macroregions.s,It.macroregions.w,It.macroregions.n],e=0;_.each(t,function(t,a){a-1!=$t&&(d3.select("#macronation-all-text-"+e).select("textPath").text(t),d3.select("#macronation-all-"+e).attr("key",t),e++)}),d3.selectAll(".macronation-all").style("display","block"),d3.selectAll(".macronation-all-text").style("display","block"),n&&(d3.select("#macronation-all-0").style("display","none"),d3.select("#macronation-all-text-0").style("display","none"))}jQuery.fn.d3Trigger=function(t){this.each(function(e,a){var r=document.createEvent("MouseEvent");r.initMouseEvent(t,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(r)})},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Fe=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e||navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("Android")>0};function Ue(){$(window).outerWidth()}Ue(),$(window).on("resize",Ue),$(window).on("click",function(){Ae(1),Ae(2),Ae(3)})});